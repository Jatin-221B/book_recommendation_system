<div class="container py-5">

<% if @user.present? %>

  <!-- USER HEADER -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body d-flex justify-content-between align-items-center flex-wrap">

      <div>
        <h1 class="fw-bold mb-1"><%= @user.name %></h1>
        <p class="text-muted mb-0">
          <strong>Email:</strong> <%= @user.email %>
        </p>
      </div>

      <div class="mt-3 mt-md-0">
        <%= link_to "View Reviews",
                    user_reviews_path(@user),
                    class: "btn btn-outline-primary btn-sm me-2" %>

        <%= link_to "Back to Users",
                    users_path,
                    class: "btn btn-outline-secondary btn-sm" %>
      </div>

    </div>
  </div>



  <!-- FAVOURITES SECTION -->
  <div class="card shadow-sm border-0">
    <div class="card-body">

      <h4 class="fw-bold mb-4">
        Favourite Books (<%= @favourite_books.count %>)
      </h4>

      <% if @favourite_books.any? %>

        <div class="row g-4">

          <% @favourite_books.each do |book| %>

            <div class="col-md-6 col-lg-4">
              <div class="card h-100 border-0 shadow-sm">
                <div class="card-body d-flex flex-column">

                  <h6 class="fw-bold">
                    <%= link_to book.title,
                                book_path(book),
                                class: "text-decoration-none text-dark" %>
                  </h6>

                  <p class="text-muted small mb-3">
                    by
                    <%= link_to book.author.name,
                                author_path(book.author),
                                class: "text-decoration-none" %>
                  </p>

                  <div class="mt-auto">
                    <%= link_to "View Book",
                                book_path(book),
                                class: "btn btn-outline-primary btn-sm w-100" %>
                  </div>

                </div>
              </div>
            </div>

          <% end %>

        </div>

      <% else %>

        <div class="alert alert-info">
          No favourite books yet.
        </div>

      <% end %>

    </div>
  </div>

<% else %>

  <div class="alert alert-danger text-center">
    User not found.
  </div>

<% end %>

</div>